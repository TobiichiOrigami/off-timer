<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸‹ç­å€’æ•¸è¨ˆæ™‚å™¨</title>
  <!-- å¼•å…¥ Tailwind CSS é€²è¡Œå¿«é€Ÿç¾åŒ– -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- å¼•å…¥ FontAwesome åœ–ç¤º -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- è¨­å®šå­—å‹ (Google Fonts: Noto Sans TC) -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Noto Sans TC', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    /* ç»ç’ƒæ“¬æ…‹æ•ˆæœ (Glassmorphism) */
    .glass-panel {
      background: rgba(255, 255, 255, 0.25);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    /* éš±è—åŸç”Ÿæ™‚é–“é¸æ“‡å™¨çš„åœ–ç¤ºï¼Œæ”¹ç”¨è‡ªè¨‚æ¨£å¼ */
    input[type="time"]::-webkit-calendar-picker-indicator {
      filter: invert(1);
      cursor: pointer;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4 text-white">

  <div class="glass-panel p-8 w-full max-w-md text-center transition-all duration-500 transform hover:scale-[1.02]">

    <!-- æ¨™é¡Œå€ -->
    <h1 class="text-3xl font-bold mb-6 drop-shadow-md">
      <i class="fa-solid fa-briefcase mr-2"></i>ä¸‹ç­å€’æ•¸è¨ˆæ™‚
    </h1>

    <!-- è¼¸å…¥å€ -->
    <div class="mb-8">
      <label for="startTime" class="block text-sm font-medium mb-2 opacity-90">
        è«‹é¸æ“‡ä»Šæ—¥æ‰“å¡æ™‚é–“
      </label>
      <div class="relative">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <i class="fa-regular fa-clock"></i>
        </div>
        <input type="time" id="startTime" class="w-full bg-white/20 border border-white/30 rounded-lg py-3 pl-10 pr-4 
                           text-white placeholder-white focus:outline-none focus:ring-2 focus:ring-white/50 
                           transition duration-200 text-xl text-center shadow-inner" required>
      </div>
      <p class="text-xs mt-2 opacity-70">* é è¨­å·¥æ™‚ç‚º 9 å°æ™‚ (å«åˆä¼‘)</p>
    </div>

    <!-- çµæœé¡¯ç¤ºå€ (é è¨­éš±è—) -->
    <div id="resultArea" class="hidden transition-opacity duration-500">
      <div class="mb-6">
        <p class="text-sm opacity-80 mb-1">é è¨ˆä¸‹ç­æ™‚é–“</p>
        <div id="endTimeDisplay" class="text-2xl font-bold text-yellow-300 drop-shadow-sm">--:--</div>
      </div>

      <div class="bg-black/20 rounded-xl p-6 mb-6 border border-white/10">
        <p class="text-sm opacity-80 mb-2">è·é›¢ä¸‹ç­é‚„æœ‰</p>
        <!-- å€’æ•¸è¨ˆæ™‚æœ¬é«” -->
        <div id="countdown" class="text-5xl font-mono font-bold tracking-wider text-white drop-shadow-lg">
          00:00:00
        </div>
        <div id="statusText" class="mt-4 text-sm font-bold text-green-300">
          åŠ æ²¹ï¼Œæ’ä½ï¼
        </div>
      </div>
    </div>

    <!-- æŒ‰éˆ•å€ -->
    <button id="calculateBtn" class="w-full bg-white text-indigo-700 font-bold py-3 px-4 rounded-lg 
                   hover:bg-indigo-50 transition duration-300 shadow-lg transform active:scale-95">
      é–‹å§‹è¨ˆç®—
    </button>

    <button id="resetBtn" class="hidden w-full bg-red-500/80 text-white font-bold py-3 px-4 rounded-lg 
                   hover:bg-red-600/80 transition duration-300 shadow-lg mt-4">
      é‡æ–°è¨­å®š
    </button>

  </div>

  <script>
    // ç²å– DOM å…ƒç´ 
    const startTimeInput = document.getElementById('startTime');
    const calculateBtn = document.getElementById('calculateBtn');
    const resetBtn = document.getElementById('resetBtn');
    const resultArea = document.getElementById('resultArea');
    const endTimeDisplay = document.getElementById('endTimeDisplay');
    const countdownDisplay = document.getElementById('countdown');
    const statusText = document.getElementById('statusText');

    let timerInterval;

    // è¨­å®šé è¨­æ™‚é–“ç‚ºç¾åœ¨ (æ–¹ä¾¿æ¸¬è©¦)
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    startTimeInput.value = `${hours}:${minutes}`;

    // é»æ“Šé–‹å§‹è¨ˆç®—
    calculateBtn.addEventListener('click', () => {
      const timeValue = startTimeInput.value;
      if (!timeValue) {
        alert('è«‹å…ˆé¸æ“‡æ‰“å¡æ™‚é–“ï¼');
        return;
      }

      // è§£æè¼¸å…¥çš„æ™‚é–“
      const [inputHours, inputMinutes] = timeValue.split(':').map(Number);
      const startDate = new Date();
      startDate.setHours(inputHours, inputMinutes, 0, 0);

      // è¨ˆç®—ä¸‹ç­æ™‚é–“ (åŠ  9 å°æ™‚)
      const endDate = new Date(startDate.getTime() + 9 * 60 * 60 * 1000);

      // é¡¯ç¤ºé è¨ˆä¸‹ç­æ™‚é–“
      const endHours = String(endDate.getHours()).padStart(2, '0');
      const endMinutes = String(endDate.getMinutes()).padStart(2, '0');
      endTimeDisplay.textContent = `${endHours}:${endMinutes}`;

      // åˆ‡æ›ä»‹é¢ç‹€æ…‹
      startTimeInput.disabled = true;
      calculateBtn.classList.add('hidden');
      resetBtn.classList.remove('hidden');
      resultArea.classList.remove('hidden');

      // ç«‹å³åŸ·è¡Œä¸€æ¬¡æ›´æ–°ï¼Œé¿å…å»¶é²
      updateCountdown(endDate);

      // å•Ÿå‹•è¨ˆæ™‚å™¨
      if (timerInterval) clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        updateCountdown(endDate);
      }, 1000);
    });

    // é»æ“Šé‡æ–°è¨­å®š
    resetBtn.addEventListener('click', () => {
      clearInterval(timerInterval);
      startTimeInput.disabled = false;
      calculateBtn.classList.remove('hidden');
      resetBtn.classList.add('hidden');
      resultArea.classList.add('hidden');
      document.title = "ä¸‹ç­å€’æ•¸è¨ˆæ™‚å™¨";
    });

    // æ›´æ–°å€’æ•¸é‚è¼¯
    function updateCountdown(endDate) {
      const now = new Date();
      const diff = endDate - now;

      if (diff <= 0) {
        // æ™‚é–“åˆ°
        clearInterval(timerInterval);
        countdownDisplay.textContent = "00:00:00";
        statusText.textContent = "ğŸ‰ ä¸‹ç­å•¦ï¼å¿«å›å®¶ä¼‘æ¯å§ï¼";
        statusText.className = "mt-4 text-xl font-bold text-yellow-300 animate-bounce";
        document.title = "ğŸ‰ ä¸‹ç­å•¦ï¼";
        return;
      }

      // è¨ˆç®—æ™‚åˆ†ç§’
      const h = Math.floor(diff / (1000 * 60 * 60));
      const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((diff % (1000 * 60)) / 1000);

      // æ ¼å¼åŒ–é¡¯ç¤º
      const formattedTime =
        `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;

      countdownDisplay.textContent = formattedTime;

      // å‹•æ…‹æ›´æ–°ç¶²é æ¨™é¡Œ
      document.title = `é‚„å‰© ${formattedTime} ä¸‹ç­`;

      // æ ¹æ“šå‰©é¤˜æ™‚é–“çµ¦äºˆä¸åŒé¼“å‹µèª
      if (h < 1) {
        statusText.textContent = "æœ€å¾Œè¡åˆºï¼å†æ’ä¸€ä¸‹ï¼ğŸ”¥";
        statusText.className = "mt-4 text-sm font-bold text-red-300";
      } else if (h < 4) {
        statusText.textContent = "åˆå¾Œæ™‚å…‰ï¼Œå–æ¯å’–å•¡å§ â˜•";
        statusText.className = "mt-4 text-sm font-bold text-orange-300";
      } else {
        statusText.textContent = "æ–°çš„ä¸€å¤©ï¼Œä¿æŒå°ˆæ³¨ ğŸ’ª";
        statusText.className = "mt-4 text-sm font-bold text-green-300";
      }
    }
  </script>
</body>

</html>